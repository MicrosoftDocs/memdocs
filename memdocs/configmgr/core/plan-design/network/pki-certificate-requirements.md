---
title: "PKI certificate requirements"
titleSuffix: "Configuration Manager"
description: "Find requirements for PKI certificates that you might need for Configuration Manager."
ms.date: 11/20/2017
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: d6a73e68-57d8-4786-842b-36669541d8ff
author: mestew
ms.author: mstewart
manager: dougeby


---
# PKI certificate requirements for Configuration Manager

*Applies to: Configuration Manager (current branch)*

The public key infrastructure (PKI) certificates that you might require for Configuration Manager are listed in the following tables. This information assumes basic knowledge of PKI certificates. For more information, see [Step-by-step example deployment of the PKI certificates for Configuration Manager: Windows Server 2008 Certification Authority](example-deployment-of-pki-certificates.md).

For more about Active Directory Certificate Services, see the following documentation:  

- For Windows Server 2012: [Active Directory Certificate Services Overview](https://go.microsoft.com/fwlink/p/?LinkId=286744)  

- For Windows Server 2008: [Active Directory Certificate Services in Windows Server 2008](https://go.microsoft.com/fwlink/p/?LinkId=115018)

For information about using Cryptography API: Next Generation (CNG) certificates with Configuration Manager, see [CNG certificates overview](cng-certificates-overview.md).


> [!IMPORTANT]  
> Configuration Manager supports Secure Hash Algorithm 2 (SHA-2) certificates. SHA-2 certificates bring an important security advantage. Therefore, we recommend the following:
> - Issue new server and client authentication certificates that are signed with SHA-2, which includes SHA-256 and SHA-512, among others.
> - All internet-facing services should use a SHA-2 certificate. For example, if you purchase a public certificate for use with a cloud management gateway, make sure that you purchase a SHA-2 certificate.  
>
>Effective February 14, 2017, Windows no longer trusts certain certificates signed with SHA-1. In general, we recommend that you issue new server and client authentication certificates signed with SHA-2 (which includes SHA-256 and SHA-512, among others). Additionally, we recommend that any internet-facing services use a SHA-2 certificate. For example, if you purchase a public certificate for use with a cloud management gateway, make sure that you purchase a SHA-2 certificate."
>
> In most cases, the change to SHA-2 certificates has no impact on operations. For more information, see [Windows Enforcement of SHA1 certificates](https://social.technet.microsoft.com/wiki/contents/articles/32288.windows-enforcement-of-sha1-certificates.aspx).

You can use any PKI to create, deploy, and manage these certificates, with the following exceptions:

- Client certificates that Configuration Manager enrolls on mobile devices and Mac computers
- Certificates that Microsoft Intune automatically creates to manage mobile devices

When you use Active Directory Certificate Services and certificate templates, this Microsoft PKI solution can ease the management of certificates. Use the **Microsoft certificate template to use** column in the following tables to identify the certificate template that most closely matches the certificate requirements. Only an enterprise certification authority that runs on the Enterprise Edition or Datacenter Edition of the server operating system, like Windows Server 2008 Enterprise and Windows Server 2008 Datacenter, can use template-based certificates.  

 Use the following sections to view the certificate requirements.  

##  <a name="BKMK_PKIcertificates_for_servers"></a> PKI Certificates for Servers  

|Configuration Manager component|Certificate purpose|Microsoft certificate template to use|Specific information in the certificate|How the certificate is used in Configuration Manager|  
|-------------------------------------|-------------------------|-------------------------------------------|---------------------------------------------|----------------------------------------------------------|  
|Site systems that run internet Information Services (IIS) and that are set up for HTTPS client connections:<br /><br /> <ul><li>Management point</li><li>Distribution point</li><li>Software update point</li><li>State migration point</li><li>Enrollment point</li><li>Enrollment proxy point</li><li>Application Catalog web service point</li><li>Application Catalog website point</li><li>A certificate registration point</li></ul>|Server authentication|**Web Server**|**Enhanced Key Usage** value must contain **Server Authentication (1.3.6.1.5.5.7.3.1)**.<br /><br /> If the site system accepts connections from the internet, the Subject Name or Subject Alternative Name must contain the internet fully qualified domain name (FQDN).<br /><br /> If the site system accepts connections from the intranet, the Subject Name or Subject Alternative Name must contain either the intranet FQDN (recommended) or the computer's name, depending on how the site system is set up.<br /><br /> If the site system accepts connections from both the internet and the intranet, both the internet FQDN and the intranet FQDN (or computer name) must be specified by using the ampersand (&) symbol delimiter between the two names.<br /><br /> **Note:** When the software update point accepts client connections from the internet only, the certificate must contain both the internet FQDN and the intranet FQDN.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Configuration Manager does not specify a maximum supported key length for this certificate. Consult your PKI and IIS documentation for any key-size related issues for this certificate.|This certificate must reside in the Personal store in the Computer certificate store.<br /><br /> This web server certificate is used to authenticate these servers to the client and to encrypt all data that's transferred between the client and these servers by using Secure Sockets Layer (SSL).|  
|Cloud-based distribution point|Server authentication|**Web Server**|**Enhanced Key Usage** value must contain **Server Authentication (1.3.6.1.5.5.7.3.1)**.<br /><br /> The Subject Name must contain a customer-defined service name and domain name in an FQDN format as the Common Name for the specific instance of the cloud-based distribution point.<br /><br /> The private key must be exportable.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Supported key lengths: 4,096 bits.|This service certificate is used to authenticate the cloud-based distribution point service to Configuration Manager clients and to encrypt all data transferred between them by using Secure Sockets Layer (SSL). This certificate must be exported in a Public Key Certificate Standard (PKCS #12) format, and the password must be known so that it can be imported when you create a cloud-based distribution point.<br /><br /> **Note:** This certificate is used in conjunction with the Windows Azure management certificate. |  
|Site system servers that run Microsoft SQL Server|Server authentication|**Web server**|**Enhanced Key Usage** value must contain **Server Authentication (1.3.6.1.5.5.7.3.1)**.<br /><br /> The Subject Name must contain the intranet fully qualified domain name (FQDN).<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|This certificate must be in the Personal store in the Computer certificate store. Configuration Manager automatically copies it to the Trusted People Store for servers in the Configuration Manager hierarchy that might have to establish trust with the server.<br /><br /> These certificates are used for server-to-server authentication.|  
|SQL Server cluster: Site system servers that run Microsoft SQL Server|Server authentication|**Web server**|**Enhanced Key Usage** value must contain **Server Authentication (1.3.6.1.5.5.7.3.1)**.<br /><br /> The Subject Name must contain the intranet fully qualified domain name (FQDN) of the cluster.<br /><br /> The private key must be exportable.<br /><br /> The certificate must have a validity period of at least two years when you configure Configuration Manager to use the SQL Server cluster.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|After you have requested and installed this certificate on one node in the cluster, export the certificate and import it to each additional node in the SQL Server cluster.<br /><br /> This certificate must be in the Personal store in the Computer certificate store. Configuration Manager automatically copies it to the Trusted People Store for servers in the Configuration Manager hierarchy that might have to establish trust with the server.<br /><br /> These certificates are used for server-to-server authentication.|  
|Site system monitoring for the following site system roles:<br /><br /><ul><li>Management point</li><li>State migration point</li></ul>|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> Computers must have a unique value in the Subject Name field or in the Subject Alternative Name field.<br /><br /> **Note:** If you are using multiple values for the Subject Alternative Name, only the first value is used.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|This certificate is required on the listed site system servers, even if the Configuration Manager client is not installed. This setup enables the health of these site system roles to be monitored and reported to the site.<br /><br /> The certificate for these site systems must reside in the Personal store of the Computer certificate store.|  
|Servers running the Configuration Manager Policy Module with the Network Device Enrollment Service role service|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> There are no specific requirements for the certificate Subject or Subject Alternative Name (SAN). You can use the same certificate for multiple servers running the Network Device Enrollment Service.<br /><br /> SHA-2 and SHA-3 hash algorithms are supported.<br /><br /> Supported key lengths: 1,024 bits and 2,048 bits.||  
|Site systems that have a distribution point installed|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> There are no specific requirements for the certificate Subject or Subject Alternative Name (SAN). You can use the same certificate for multiple distribution points. However, it's a good idea to use a different certificate for each distribution point.<br /><br /> The private key must be exportable.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|This certificate has two purposes:<br /><br /><ul><li>It authenticates the distribution point to an HTTPS-enabled management point before the distribution point sends status messages.</li><li>When the **Enable PXE support for clients** distribution point option is selected, the certificate is sent to computers. If task sequences in the operating system deployment process include client actions like client policy retrieval or sending inventory information, the client computers can connect to a HTTPS-enabled management point during the deployment of the operating system.</li></ul> This certificate is used for the duration of the operating system deployment process only and is not installed on the client. Because of this temporary use, the same certificate can be used for every operating system deployment if you do not want to use multiple client certificates.<br /><br /> This certificate must be exported in a Public Key Certificate Standard (PKCS #12) format. The password must be known so that it can be imported into the distribution point properties.<br /><br /> **Note:** The requirements for this certificate are the same as the client certificate for boot images that deploy operating systems. Because the requirements are the same, you can use the same certificate file.|  
|Site system server that runs the Microsoft Intune connector|Client authentication|Not applicable: Intune automatically creates this certificate.|**Enhanced Key Usage** value contains **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> Three custom extensions uniquely identify the customer's Intune subscription.<br /><br /> The key size is 2,048 bits and uses the SHA-1 hash algorithm.<br /><br /> **Note:** You cannot change these settings. This information is provided for informational purposes only.|This certificate is automatically requested and installed to the Configuration Manager database when you subscribe to Microsoft Intune. When you install the Microsoft Intune connector, this certificate is then installed on the site system server that runs the Microsoft Intune connector. It is installed in the Computer certificate store.<br /><br /> This certificate is used to authenticate the Configuration Manager hierarchy to Microsoft Intune by using the Microsoft Intune connector. All data that is transferred between them uses Secure Sockets Layer (SSL).|  

###  <a name="BKMK_PKIcertificates_for_proxyservers"></a> Proxy web servers for internet-based client management  
 If the site supports internet-based client management, and you are using a proxy web server by using SSL termination (bridging) for incoming internet connections, the proxy web server has the certificate requirements listed in the following table.  

> [!NOTE]  
>  If you are using a proxy web server without SSL termination (tunneling), no additional certificates are required on the proxy web server.  

|Network infrastructure component|Certificate purpose|Microsoft certificate template to use|Specific information in the certificate|How the certificate is used in Configuration Manager|  
|--------------------------------------|-------------------------|-------------------------------------------|---------------------------------------------|----------------------------------------------------------|  
|Proxy web server accepting client connections over the internet|Server authentication and client authentication|1. <br />                        **Web Server**<br /><br /> 2. <br />                        **Workstation Authentication**|internet FQDN in the Subject Name field or in the Subject Alternative Name field. If you are using Microsoft certificate templates, the Subject Alternative Name is available with the workstation template only.<br /><br /> The SHA-2 hash algorithm is supported.|This certificate is used to authenticate the following servers to internet clients and to encrypt all data transferred between the client and this server by using SSL:<br /><br /><ul><li>Internet-based management point</li><li>Internet-based distribution point</li><li>Internet-based software update point</li></ul> The client authentication is used to bridge client connections between the Configuration Manager clients and the internet-based site systems.|  

##  <a name="BKMK_PKIcertificates_for_clients"></a> PKI certificates for clients  

|Configuration Manager component|Certificate purpose|Microsoft certificate template to use|Specific information in the certificate|How the certificate is used in Configuration Manager|  
|-------------------------------------|-------------------------|-------------------------------------------|---------------------------------------------|----------------------------------------------------------|  
|Windows client computers|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> Client computers must have a unique value in the Subject Name field or in the Subject Alternative Name field.<br /><br /> **Note:** If you are using multiple values for the Subject Alternative Name, only the first value is used.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|By default, Configuration Manager looks for computer certificates in the Personal store in the Computer certificate store.<br /><br /> Except for the software update point and the Application Catalog website point, this certificate authenticates the client to site system servers that run IIS and that are set up to use HTTPS.|  
|Mobile device clients|Client authentication|**Authenticated Session**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> SHA-1<br /><br /> Maximum supported key length is 2,048 bits.<br /><br /> **Notes:**<br /><br /><ul><li>These certificates must be in Distinguished Encoding Rules (DER) encoded binary X.509 format.</li><li>Base64 encoded X.509 format is not supported.</li></ul>|This certificate authenticates the mobile device client to the site system servers that it communicates with, like management points and distribution points.|  
|Boot images for deploying operating systems|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> There are no specific requirements for the certificate Subject Name field or Subject Alternative Name (SAN), and you can use the same certificate for all boot images.<br /><br /> The private key must be exportable.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|The certificate is used if task sequences in the operating system deployment process include client actions like client policy retrieval or sending inventory information.<br /><br /> This certificate is used for the duration of the operating system deployment process only and is not installed on the client. Because of this temporary use, the same certificate can be used for every operating system deployment if you do not want to use multiple client certificates.<br /><br /> This certificate must be exported in a Public Key Certificate Standard (PKCS #12) format, and the password must be known so that it can be imported to the Configuration Manager boot images.<br /><br /> This certificate is temporary for the task sequence and not used to install the client. When you have an environment with  HTTPS only, the client must have a valid certificate for the client to communicate with the site and for the deployment to continue. The client can automatically generate a certificate when the client is joined to Active Directory, or you can install a client certificate by using another method.<br /><br /> **Note:** The requirements for this certificate are the same as the server certificate for site systems that have a distribution point installed. Because the requirements are the same, you can use the same certificate file.|  
|Mac client computers|Client authentication|For Configuration Manager enrollment: **Authenticated Session**<br /><br /> For certificate installation independent from Configuration Manager: **Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> For Configuration Manager that creates a User certificate, the certificate Subject value is automatically populated with the user name of the person who enrolls the Mac computer.<br /><br /> For certificate installation that does not use Configuration Manager enrollment but deploys a Computer certificate independently from Configuration Manager, the certificate Subject value must be unique. For example, specify the FQDN of the computer.<br /><br /> The Subject Alternative Name field is not supported.<br /><br /> The SHA-2 hash algorithm is supported.<br /><br /> Maximum supported key length is 2,048 bits.|This certificate authenticates the Mac client computer to the site system servers that it communicates with, like management points and distribution points.|  
|Linux and UNIX client computers|Client authentication|**Workstation Authentication**|**Enhanced Key Usage** value must contain **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> The Subject Alternative Name field is not supported.<br /><br /> The private key must be exportable.<br /><br /> SHA-2 hash algorithm is supported if the operating system of the client supports SHA-2. For more information, see the [About Linux and UNIX Operating Systems That do not Support SHA-256](../../../core/clients/deploy/plan/planning-for-client-deployment-to-linux-and-unix-computers.md#BKMK_NoSHA-256) section in [Planning for client deployment to Linux and UNIX computers in Configuration Manager](../../../core/clients/deploy/plan/planning-for-client-deployment-to-linux-and-unix-computers.md).<br /><br /> Supported key lengths: 2,048 bits.<br /><br /> **Note:** These certificates must be in Distinguished Encoding Rules (DER) encoded binary X.509 format. Base64 encoded X.509 format is not supported.|This certificate authenticates the Linux or UNIX client computer to the site system servers that it communicates with, like management points and distribution points. This certificate must be exported in a Public Key Certificate Standard (PKCS#12) format, and the password must be known so you can specify it to the client when you specify the PKI certificate.<br /><br /> For additional information, see the [Planning for Security and Certificates for Linux and UNIX Servers](../../../core/clients/deploy/plan/planning-for-client-deployment-to-linux-and-unix-computers.md#BKMK_SecurityforLnU) section in [Planning for client deployment to Linux and UNIX computers in Configuration Manager](../../../core/clients/deploy/plan/planning-for-client-deployment-to-linux-and-unix-computers.md).|  
|Root certification authority (CA) certificates for the following scenarios:<br /><br /><ul><li>Operating system deployment</li><li>Mobile device enrollment</li><li> Client certificate authentication</li></ul>|Certificate chain to a trusted source|Not applicable.|Standard root CA certificate.|The root CA certificate must be provided when clients have to chain the certificates of the communicating server to a trusted source. This applies in the following scenarios:<br /><br /><ul><li>When you deploy an operating system, and task sequences run that connect the client computer to a management point that is set up to use HTTPS.</li><li>When you enroll a mobile device to be managed by Configuration Manager.</li></ul> In addition, the root CA certificate for clients must be provided if the client certificates are issued by a different CA hierarchy than the CA hierarchy that issued the management point certificate.|  
|Mobile devices that are enrolled by Microsoft Intune|Client authentication|Not applicable: Intune automatically creates this certificate.|**Enhanced Key Usage** value contains **Client Authentication (1.3.6.1.5.5.7.3.2)**.<br /><br /> Three custom extensions uniquely identify the customer Intune subscription.<br /><br /> Users can supply the certificate Subject value during enrollment. However, Intune does not use this value to identify the device.<br /><br /> The key size is 2,048 bits and uses the SHA-1 hash algorithm.<br /><br /> **Note:** You cannot change these settings. This information is provided for informational purposes only.|This certificate is automatically requested and installed when authenticated users enroll their mobiles devices by using Microsoft Intune. The resulting certificate on the device resides in the Computer store and authenticates the enrolled mobile device to Intune, so that it can then be managed.<br /><br /> Because of the custom extensions in the certificate, authentication is restricted to the Intune subscription that has been established for the organization.|

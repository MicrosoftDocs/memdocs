---
author: aczechowski
ms.author: aaroncz
ms.prod: configuration-manager
ms.technology: configmgr-other
ms.topic: include
ms.date: 08/02/2019
ms.collection: M365-identity-device-management
---

## <a name="bkmk_osd"></a> Improvements to OS deployment

This release includes the following improvements to OS deployment:

- Based on your [UserVoice feedback](https://configurationmanager.uservoice.com/forums/300492-ideas/suggestions/35370691-ability-to-specify-the-keyboard-layout-in-the-boot), configure the default keyboard layout for a boot image. On the **Customization** tab of a boot image, use the new option to **Set default keyboard layout in WinPE**. In the console, if you select a language other than en-us, Configuration Manager still includes en-us in the available input locales. On the device, the initial keyboard layout is the selected locale, but the user can switch the device to en-us if needed.<!-- 4910348 -->

    > [!Note]
    > The [Set-CMBootImage](https://docs.microsoft.com/powershell/module/configurationmanager/set-cmbootimage?view=sccm-ps) PowerShell cmdlet now includes a new parameter, `-InputLocale`. For example:
    >
    > ```PowerShell
    > # Set boot image keyboard layout to Russian (Russia)
    > Set-CMBootimage -Id "CM100004" -InputLocale "ru-ru"`
    > ```

- Based on your [UserVoice feedback](https://configurationmanager.uservoice.com/forums/300492-ideas/suggestions/37927843-store-output-of-run-command-line-to-tsenv-with-ru), the **Run Command Line** step now includes an option to **Output to task sequence variable**. When you enable this option, the task sequence saves the output from the command to a custom task sequence variable that you specify.<!-- 4798352  -->

    > [!Note]  
    > Configuration Manager now limits this output to the last one thousand characters. This change applies to both the **Run Command Line** and **Run Powershell Script**. For more information, see [About task sequence steps](/sccm/osd/understand/task-sequence-steps) steps.

- When importing an OS upgrade package, you can **Extact a specific image index from install.wim file of selected upgrade package**. This behavior is similar as with [OS images](/sccm/osd/get-started/manage-operating-system-images#BKMK_AddOSImages), except it overwrites the existing install.wim in the OS upgrade package. It extracts the image index to a temporary location, and then moves it into the original source directory.<!-- 4931110 -->

- Based on your [UserVoice feedback](https://configurationmanager.uservoice.com/forums/300492-ideas/suggestions/18509686-create-a-powershell-cmdlet-too-add-edit-remove-dup), use the following PowerShell cmdlets to automate the management of [duplicate hardware identifiers](/sccm/osd/deploy-use/use-pxe-to-deploy-windows-over-the-network#manage-duplicate-hardware-identifiers):<!-- 4852819 -->
    - New-CMDuplicateHardwareIdentifier
    - Set-CMDuplicateHardwareIdentifier
    - Remove-CMDuplicateHardwareIdentifier

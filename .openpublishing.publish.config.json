# ================================
# Soubor: .openpublishing.publish.config.json
# ================================
{
  "docsets_to_publish": [
    {
      "docset_name": "moje-dokumentace",
      "build_output_subfolder": "moje-dokumentace",
      "locale": "cs-cz",
      "moniker_ranges": [
        ">=current",
        "preview"
      ],
      "need_preview_pull_request": true,
      "open_to_public_contributors": true
    }
  ],
  "dependent_repositories": [
    {
      "path_to_root": "_themes",
      "url": "https://github.com/MicrosoftDocs/azure-docs-sdk-python",
      "branch": "main"
    },
    {
      "path_to_root": "_security",
      "url": "https://github.com/MicrosoftDocs/security",
      "branch": "main"
    }
  ],
  "branches_to_filter": [
    "archiv",
    "zastaralé"
  ],
  "notification_subscribers": [
    "docs-team@contoso.com"
  ]
}

# ================================
# Soubor: .github/workflows/publish.yml
# ================================
name: Publish Docs to GitHub Pages

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repozitář
        uses: actions/checkout@v3

      - name: Nastavení Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Instalace závislostí
        run: npm install

      - name: Build dokumentace
        run: npm run build

      - name: Deploy na GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./moje-dokumentace
